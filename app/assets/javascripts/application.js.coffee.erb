# This is a manifest file that'll be compiled into application.js, which will include all the files
# listed below.
#
# Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
# or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
#
# It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
# the compiled file.
#
# WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
# GO AFTER THE REQUIRES BELOW.
#
#= require jquery
#= require bootstrap
#= require angular
#= require angular-ui
#= require angular-ui-states
#= require angular-resource
#= require_self
#= require_tree .

window.myapp = angular
  .module 'myapp',['ui.compat','ui.router', 'ngResource'], ($stateProvider ,$locationProvider, $urlRouterProvider)->
    $stateProvider
      .state 'feeds',
        url: '/feeds'
        views:
          'side':
            controller: 'FeedsCnt'
            templateUrl: '/feeds.tpl'
      .state 'feeds/:id',
        url: '/feeds/:id'
        views:
          'side':
            controller: 'FeedsCnt'
            templateUrl: '/feeds.tpl'
          '':
            controller: 'FeedCnt'
            templateUrl: '/feeds/0.tpl'
      .state 'projects',
        url: '/projects'
        views:
          '':
            controller: 'ProjectsCnt'
            templateUrl: '/projects.tpl'
      .state 'projects/new',
        url: '/projects/new',
        views:
          'side':
            controller: 'ProjectsCnt'
            templateUrl: '/projects.tpl'
          '':
            controller: 'ProjectFormCnt'
            templateUrl: '/projects/new.tpl'
      .state 'projects/:id',
        url: '/projects/:id',
        views:
          'side':
            controller: 'ProjectsCnt'
            templateUrl: '/projects.tpl'
          '':
            controller: 'ProjectCnt'
            templateUrl: '/projects/0.tpl'
      .state 'projects/:id/edit',
        url: '/projects/:id/edit',
        views:
          'side':
            controller: 'ProjectsCnt'
            templateUrl: '/projects.tpl'
          '':
            controller: 'ProjectFormCnt'
            templateUrl: '/projects/0/edit.tpl'

    $locationProvider.html5Mode(true)

  .run ($rootScope,   $state,   $stateParams)->
    $rootScope.$state = $state
    $rootScope.$stateParams = $stateParams
