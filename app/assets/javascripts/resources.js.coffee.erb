<% url = AngularOnRails::Application.routes.url_helpers %>
app = window.app
app.factory 'Project', ($resource)->
  $resource '<%= url.projects_path %>/:collection:id/:member',
    {id: '@id', collection: '@collection', member: '@member'},
    'get':    {method:'GET'},
    'save':   {method:'PUT'},
    'create':   {method:'POST'},
    'query':  {method:'GET', isArray:true},
    'preview': {method:'GET', params: {collection: 'preview'}},
    'delete': {method:'DELETE'}

app.factory 'Issue', ($resource)->
  $resource '<%= url.project_issues_path(project_id: ':project_id') %>/:collection:id/:member',
    {project_id: '@project_id', id: '@id', collection: '@collection', member: '@member'},
    'get':    {method:'GET'},
    'save':   {method:'PUT'},
    'create':   {method:'POST'},
    'query':  {method:'GET', isArray:true},
    'preview': {method:'GET', params: {collection: 'preview'}},
    'delete': {method:'DELETE'}
